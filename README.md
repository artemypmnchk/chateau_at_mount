# Chateau Bot

Telegram –±–æ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª—ã. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Vercel –∏ –¥—Ä—É–≥–∏—Ö serverless –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö —Å **–ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîó **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç POST –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- üì± **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª—ã
- ‚ö° **Serverless**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- üé® **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON –¥–∞–Ω–Ω—ã—Ö –≤ —á–∏—Ç–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: HMAC –ø–æ–¥–ø–∏—Å—å, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è webhook
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ webhook
WEBHOOK_SECRET=your_random_secret_here
```

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å HMAC-SHA256 –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö webhook:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-Webhook-Signature` –∏–ª–∏ `X-Hub-Signature-256`
- –§–æ—Ä–º–∞—Ç: `sha256=<–ø–æ–¥–ø–∏—Å—å>` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `<–ø–æ–¥–ø–∏—Å—å>`

### –ó–∞—â–∏—â–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤, –ø–∞—Ä–æ–ª–µ–π, –∫–ª—é—á–µ–π –≤ –ª–æ–≥–∞—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ IP –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –∞—É–¥–∏—Ç–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ payload (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1MB)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Content-Type –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ injection –∞—Ç–∞–∫

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
```
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
3. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≤–∞—à –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Vercel

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/your-username/chateau-bot)

#### –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Vercel
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. –Ω–∏–∂–µ)
4. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Vercel dashboard –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TELEGRAM_TOKEN=your_bot_token_here
DEFAULT_CHANNEL_ID=-1001234567890

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
WEBHOOK_SECRET=your_strong_random_secret_here

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
ALLOWED_CHANNELS=[{"id":"-1001234567890","name":"Main Channel"}]
ALLOWED_ORIGINS=https://your-trusted-domain.com,https://api.service.com
MAX_PAYLOAD_SIZE=1048576
LOG_LEVEL=info
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ ID –∫–∞–Ω–∞–ª–∞

–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å ID –∫–∞–Ω–∞–ª–∞:

1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot) –≤ –≤–∞—à –∫–∞–Ω–∞–ª
2. –û–Ω –ø–æ–∫–∞–∂–µ—Ç ID –∫–∞–Ω–∞–ª–∞ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`)
3. –£–¥–∞–ª–∏—Ç–µ –±–æ—Ç–∞ –∏–∑ –∫–∞–Ω–∞–ª–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Webhook URL

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤–∞—à webhook –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```
https://your-app.vercel.app/api/webhook
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –º–æ–∂–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
```
https://your-app.vercel.app/api/status
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ webhook —Å –ø–æ–¥–ø–∏—Å—å—é

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ (–ø—Ä–∏–º–µ—Ä –Ω–∞ bash)
PAYLOAD='{"event": "test", "message": "Hello from webhook!"}'
SECRET="your_webhook_secret"
SIGNATURE=$(echo -n "$PAYLOAD" | openssl dgst -sha256 -hmac "$SECRET" | cut -d' ' -f2)

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å –ø–æ–¥–ø–∏—Å—å—é
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -H "X-Webhook-Signature: sha256=$SIGNATURE" \
  -d "$PAYLOAD"
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –ø–æ–¥–ø–∏—Å–∏ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ WEBHOOK_SECRET –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -d '{"event": "test", "message": "Hello from webhook!"}'
```

## –§–æ—Ä–º–∞—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```json
{
  "event": "order_created",
  "source": "e-commerce",
  "timestamp": "2024-01-01T12:00:00Z",
  "data": {
    "order_id": "12345",
    "customer": "John Doe",
    "amount": 99.99
  }
}
```

### –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π JSON

```json
{
  "type": "notification",
  "user": "admin",
  "message": "Server restarted"
}
```

### –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç

–õ—é–±—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –µ—Å—Ç—å.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `TELEGRAM_TOKEN` | –î–∞ | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ |
| `DEFAULT_CHANNEL_ID` | –î–∞ | ID –∫–∞–Ω–∞–ª–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `WEBHOOK_SECRET` | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | –°–µ–∫—Ä–µ—Ç –¥–ª—è HMAC –ø–æ–¥–ø–∏—Å–∏ webhook |
| `ALLOWED_CHANNELS` | –ù–µ—Ç | JSON –º–∞—Å—Å–∏–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ |
| `ALLOWED_ORIGINS` | –ù–µ—Ç | –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `MAX_PAYLOAD_SIZE` | –ù–µ—Ç | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä payload –≤ –±–∞–π—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1MB) |
| `LOG_LEVEL` | –ù–µ—Ç | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: debug, info, warn, error |

### –ü—Ä–∏–º–µ—Ä ALLOWED_CHANNELS

```json
[
  {"id": "-1001234567890", "name": "Main Channel"},
  {"id": "-1001234567891", "name": "Alerts Channel"}
]
```

### –ü—Ä–∏–º–µ—Ä ALLOWED_ORIGINS

```
https://api.github.com,https://hooks.stripe.com,https://your-app.herokuapp.com
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### GitHub Actions —Å –ø–æ–¥–ø–∏—Å—å—é

```yaml
- name: Notify Telegram
  env:
    WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}
    WEBHOOK_SECRET: ${{ secrets.WEBHOOK_SECRET }}
  run: |
    PAYLOAD='{"event": "deploy", "source": "github", "status": "success", "commit": "${{ github.sha }}"}'
    SIGNATURE=$(echo -n "$PAYLOAD" | openssl dgst -sha256 -hmac "$WEBHOOK_SECRET" | cut -d' ' -f2)
    curl -X POST "$WEBHOOK_URL" \
      -H "Content-Type: application/json" \
      -H "X-Webhook-Signature: sha256=$SIGNATURE" \
      -d "$PAYLOAD"
```

### Stripe webhook (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å)

Stripe –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Stripe-Signature`. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ endpoint:
```
https://your-app.vercel.app/api/webhook
```

### Docker Hub

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –≤ Docker Hub –Ω–∞ –≤–∞—à URL —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–µ–∫—Ä–µ—Ç–æ–º.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –¥–µ—Ç–∞–ª—è—Ö

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ HMAC

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HMAC-SHA256 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ webhook:

```go
// –ü—Ä–∏–º–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏ –≤ Go
import (
    "crypto/hmac"
    "crypto/sha256"
    "encoding/hex"
)

func generateSignature(payload []byte, secret string) string {
    mac := hmac.New(sha256.New, []byte(secret))
    mac.Write(payload)
    return hex.EncodeToString(mac.Sum(nil))
}
```

### –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—è —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ:
- `token`, `password`, `secret`, `key`
- `authorization`, `api_key`, `access_token`
- `jwt`, `private_key`, `certificate`

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:
```
Webhook received from 192.168.1.1 (size: 156 bytes): {"event":"login","user":"john","password":"***MASKED***"}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

- **–†–∞–∑–º–µ—Ä payload**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1MB
- **Content-Type**: –¢–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **HTTPS**: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTPS
- **IP –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

### Railway.app

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### Render.com

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Build Command: `go build -o main ./cmd/bot/main.go`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Start Command: `./main`

### Fly.io

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ fly CLI
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `fly launch`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `fly secrets set TELEGRAM_TOKEN=your_token WEBHOOK_SECRET=your_secret`

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–í—Å–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
```
Security: Invalid method attempted: GET from 192.168.1.1
Security: Request validation failed from 192.168.1.1: payload too large
Security: Invalid webhook signature from 192.168.1.1
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í –æ—Ç–≤–µ—Ç–µ webhook –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```json
{
  "status": "success",
  "message": "Webhook processed successfully",
  "duration_ms": 234
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏

```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å—å
echo -n '{"test": "data"}' | openssl dgst -sha256 -hmac "secret" | cut -d' ' -f2

# –¢–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -H "X-Webhook-Signature: sha256=YOUR_SIGNATURE" \
  -d '{"test": "data"}'

# –¢–µ—Å—Ç —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 401)
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -H "X-Webhook-Signature: sha256=invalid" \
  -d '{"test": "data"}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤

```bash
# –¢–µ—Å—Ç –±–æ–ª—å—à–æ–≥–æ payload (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 400)
curl -X POST https://your-app.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -d "$(head -c 2000000 /dev/zero | tr '\0' 'a')"
```

## –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### Vercel
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 10 —Å–µ–∫—É–Ω–¥ (Hobby), 15 –º–∏–Ω—É—Ç (Pro)
- –ü–∞–º—è—Ç—å: –¥–æ 1GB
- –ó–∞–ø—Ä–æ—Å—ã: 100GB bandwidth –≤ –º–µ—Å—è—Ü (Hobby)

### Telegram
- –ú–∞–∫—Å–∏–º—É–º 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É –Ω–∞ –±–æ—Ç–∞
- –ú–∞–∫—Å–∏–º—É–º 20 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –≤ –≥—Ä—É–ø–ø—É/–∫–∞–Ω–∞–ª

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä payload: 1MB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–æ 10MB)
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–æ–¥–ø–∏—Å–∏: –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
- Rate limiting: –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è Vercel

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Webhook –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å 401
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∏ HMAC
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø–æ–¥–ø–∏—Å–∏

### Payload –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å 400
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–º–∞–∫—Å–∏–º—É–º 1MB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ Content-Type
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ HTTPS

### –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤**: –ú–µ–Ω—è–π—Ç–µ WEBHOOK_SECRET –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**: –ò—â–∏—Ç–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: `go mod tidy && go mod download`
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤**: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –ª–æ–≥–∏

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] WEBHOOK_SECRET —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Å–ª–æ–∂–Ω—ã–π
- [ ] TELEGRAM_TOKEN –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–æ–≥–∏ –∏–ª–∏ –∫–æ–¥
- [ ] –ò—Å—Ç–æ—á–Ω–∏–∫–∏ webhook –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã (ALLOWED_ORIGINS)
- [ ] –†–∞–∑–º–µ—Ä payload –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ä–∞–∑—É–º–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π. 